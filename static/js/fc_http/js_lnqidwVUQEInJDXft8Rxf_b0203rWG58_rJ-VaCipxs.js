(function(a){if(typeof define==="function"&&define.amd){define(a)}else{window.purl=a()}})(function(){var i={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],c={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},g=/^[0-9]+$/;function f(s,v){var x=decodeURI(s),u=a[v||false?"strict":"loose"].exec(x),w={attr:{},param:{},seg:{}},t=14;while(t--){w.attr[o[t]]=u[t]||""}w.param.query=j(w.attr.query);w.param.fragment=j(w.attr.fragment);w.seg.path=w.attr.path.replace(/^\/+|\/+$/g,"").split("/");w.seg.fragment=w.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");w.attr.base=w.attr.host?(w.attr.protocol?w.attr.protocol+"://"+w.attr.host:w.attr.host)+(w.attr.port?":"+w.attr.port:""):"";return w}function b(t){var s=t.tagName;if(typeof s!=="undefined"){return i[s.toLowerCase()]}return s}function r(w,v){if(w[v].length===0){return w[v]={}}var u={};for(var s in w[v]){u[s]=w[v][s]}w[v]=u;return u}function d(w,u,t,x){var s=w.shift();if(!s){if(h(u[t])){u[t].push(x)}else{if("object"==typeof u[t]){u[t]=x}else{if("undefined"==typeof u[t]){u[t]=x}else{u[t]=[u[t],x]}}}}else{var v=u[t]=u[t]||[];if("]"==s){if(h(v)){if(""!==x){v.push(x)}}else{if("object"==typeof v){v[q(v).length]=x}else{v=u[t]=[u[t],x]}}}else{if(~s.indexOf("]")){s=s.substr(0,s.length-1);if(!g.test(s)&&h(v)){v=r(u,t)}d(w,v,s,x)}else{if(!g.test(s)&&h(v)){v=r(u,t)}d(w,v,s,x)}}}}function l(w,v,y){if(~v.indexOf("]")){var x=v.split("[");d(x,w,"base",y)}else{if(!g.test(v)&&h(w.base)){var u={};for(var s in w.base){u[s]=w.base[s]}w.base=u}if(v!==""){m(w.base,v,y)}}return w}function j(s){return k(String(s).split(/&|;/),function(t,y){try{y=decodeURIComponent(y.replace(/\+/g," "))}catch(v){}var z=y.indexOf("="),x=p(y),u=y.substr(0,x||z),w=y.substr(x||z,y.length);w=w.substr(w.indexOf("=")+1,w.length);if(u===""){u=y;w=""}return l(t,u,w)},{base:{}}).base}function m(u,t,w){var s=u[t];if(typeof s==="undefined"){u[t]=w}else{if(h(s)){s.push(w)}else{u[t]=[s,w]}}}function p(v){var s=v.length,u,w;for(var t=0;t<s;++t){w=v[t];if("]"==w){u=false}if("["==w){u=true}if("="==w&&!u){return t}}}function k(w,t){var u=0,s=w.length>>0,v=arguments[2];while(u<s){if(u in w){v=t.call(undefined,v,w[u],u,w)}++u}return v}function h(s){return Object.prototype.toString.call(s)==="[object Array]"}function q(t){var s=[];for(var u in t){if(t.hasOwnProperty(u)){s.push(u)}}return s}function n(s,t){if(arguments.length===1&&s===true){t=true;s=undefined}t=t||false;s=s||window.location.toString();return{data:f(s,t),attr:function(u){u=c[u]||u;return typeof u!=="undefined"?this.data.attr[u]:this.data.attr},param:function(u){return typeof u!=="undefined"?this.data.param.query[u]:this.data.param.query},fparam:function(u){return typeof u!=="undefined"?this.data.param.fragment[u]:this.data.param.fragment},segment:function(u){if(typeof u==="undefined"){return this.data.seg.path}else{u=u<0?this.data.seg.path.length+u:u-1;return this.data.seg.path[u]}},fsegment:function(u){if(typeof u==="undefined"){return this.data.seg.fragment}else{u=u<0?this.data.seg.fragment.length+u:u-1;return this.data.seg.fragment[u]}}}}n.jQuery=function(s){if(s!=null){s.fn.url=function(u){var t="";if(this.length){t=s(this).attr(b(this[0]))||""}return n(t,u)};s.url=n}};n.jQuery(window.jQuery);return n});var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),i=c?/win/.test(c):/win/.test(f),k=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",g=[0,0,0],l=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){l=aB.plugins[ab].description;if(l&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);if(j){l=j.GetVariable("$version");if(l){d=true;l=l.split(" ")[1].split(",");g=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:d,win:i,mac:k}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var i=0;i<h;i++){var c=aG[i].id;var m=aG[i].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var j=aS(c);if(j){if(ao(aG[i].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(m){a.success=true;a.ref=av(c);m(a)}}else{if(aG[i].expressInstall&&au()){var f={};f.data=aG[i].expressInstall;f.width=j.getAttribute("width")||"0";f.height=j.getAttribute("height")||"0";if(j.getAttribute("class")){f.styleclass=j.getAttribute("class")}if(j.getAttribute("align")){f.align=j.getAttribute("align")}var g={};var d=j.getElementsByTagName("param");var l=d.length;for(var k=0;k<l;k++){if(d[k].getAttribute("name").toLowerCase()!="movie"){g[d[k].getAttribute("name")]=d[k].getAttribute("value")}}ae(f,g,c,m)}else{aF(j);if(m){m(a)}}}}}else{ay(c,true);if(m){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}m(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(g,d,i,f){aU=true;ap=f||null;at={success:false,id:i};var a=aS(i);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=i}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");i+="SWFObjectNew";h.setAttribute("id",i);a.parentNode.insertBefore(h,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(g,d,i)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(f,h,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof f.id==aq){f.id=c}if(ah.ie&&ah.win){var g="";for(var j in f){if(f[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){h.movie=f[j]}else{if(j.toLowerCase()=="styleclass"){g+=' class="'+f[j]+'"'}else{if(j.toLowerCase()!="classid"){g+=" "+j+'="'+f[j]+'"'}}}}}var i="";for(var k in h){if(h[k]!=Object.prototype[k]){i+='<param name="'+k+'" value="'+h[k]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+i+"</object>";ag[ag.length]=f.id;d=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var l in f){if(f[l]!=Object.prototype[l]){if(l.toLowerCase()=="styleclass"){b.setAttribute("class",f[l])}else{if(l.toLowerCase()!="classid"){b.setAttribute(l,f[l])}}}}for(var m in h){if(h[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"){aQ(b,m,h[m])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",h);aH=f.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var d={};d.id=a;d.swfVersion=f;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(l,f,i,g,c,a,b,j,h,k){var d={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&l&&f&&i&&g&&c){ay(f,false);aj(function(){i+="";g+="";var r={};if(h&&typeof h===aD){for(var p in h){r[p]=h[p]}}r.data=l;r.width=i;r.height=g;var o={};if(j&&typeof j===aD){for(var q in j){o[q]=j[q]}}if(b&&typeof b===aD){for(var m in b){if(typeof o.flashvars!=aq){o.flashvars+="&"+m+"="+b[m]}else{o.flashvars=m+"="+b[m]}}}if(ao(c)){var n=aA(r,o,f);if(r.id==f){ay(f,true)}d.success=true;d.ref=n}else{if(a&&au()){r.data=a;ae(r,o,f,k);return}else{ay(f,true)}}if(k){k(d)}})}else{if(k){k(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();if(typeof CP==="undefined"){CP={}}if(!CP.utils){CP.utils={}}CP.utils.Modal=function(a){this.options={overlayOpacity:0.8,overlayClickClose:true,showClose:true,contentCloseDelegate:null,centerOnResize:true,transitionDuration:250,onOpenComplete:function(){},onCloseComplete:function(){},onOpenStart:function(){},onCloseStart:function(){}};jQuery.extend(true,this.options,a);this.isOpen=false;this.isLoading=false;if(location.pathname.match(/(\/|\/fr|\/es|\/de|\/pt)(\/index.php)?/)){this.inject();this.attach()}};CP.utils.Modal.prototype.inject=function(){this.overlay=jQuery('<div id="modal-overlay"></div>').appendTo("body");this.loading=jQuery('<div id="modal-loading"></div>').appendTo("body");this.modal=jQuery('<div id="modal-window"></div>').appendTo("body");if(this.options.showClose){this.closeButton=jQuery('<a id="modal-close" href="#">close</a>').appendTo(this.modal)}this.modalContent=jQuery('<div id="modal-content"></div>').appendTo(this.modal);this.overlay.css("opacity",this.options.overlayOpacity);this.body=jQuery("body")};CP.utils.Modal.prototype.attach=function(){var a=this;jQuery(window).resize(function(){a.positionOverlay();a.centerElement(a.loading)});if(this.options.contentCloseDelegate!=null){this.modalContent.delegate(this.options.contentCloseDelegate,"click",function(b){b.preventDefault();a.close()})}this.overlay.click(function(b){b.stopPropagation();if(a.options.overlayClickClose){a.close()}});if(this.options.showClose){this.closeButton.click(function(b){b.preventDefault();a.close()})}if(this.options.centerOnResize){jQuery(window).resize(function(){a.centerElement(a.modal)})}};CP.utils.Modal.prototype.centerElement=function(b){var d=b.width();var c=b.height();var a=jQuery(window).width();var i=jQuery(window).height();var h=jQuery(window).scrollTop();var g=(a/2)-(d/2);var f=h+((i/2)-(c/2));if(f<0){f=0}if(g<0){g=0}b.css({top:f,left:g})};CP.utils.Modal.prototype.positionOverlay=function(){if(jQuery.browser.msie&&jQuery.browser.version==="6.0"){this.overlay.css("height",jQuery(document).height())}};CP.utils.Modal.prototype.positionModal=function(){this.centerElement(this.modal)};CP.utils.Modal.prototype.showLoading=function(){if(this.isOpen){this.modal.fadeOut(this.options.transitionDuration);this.loading.fadeIn(this.options.transitionDuration)}else{this.overlay.fadeIn(this.options.transitionDuration);this.positionOverlay();this.loading.fadeIn(this.options.transitionDuration);this.centerElement(this.loading)}this.isLoading=true};CP.utils.Modal.prototype.open=function(c,b,d){var a=this;if(!this.isOpen){if(this.isLoading){this.loading.hide();this.modalContent.append(c);this.modal.fadeIn(this.options.transitionDuration,function(){a.options.onOpenComplete();if(d){a.activeCloseCallback=d}});this.options.onOpenStart();if(b){b()}this.centerElement(this.modal);this.isOpen=true;this.isLoading=false;if(a.closeButton){a.closeButton.show()}this.body.addClass("modal-active")}else{this.overlay.fadeIn(a.options.transitionDuration,function(){a.modalContent.append(c);a.modal.fadeIn(a.options.transitionDuration,function(){a.options.onOpenComplete();if(d){a.activeCloseCallback=d}});a.options.onOpenStart();if(a.closeButton){a.closeButton.show()}if(b){b()}a.centerElement(a.modal);a.isOpen=true;a.isLoading=false;a.body.addClass("modal-active")});this.positionOverlay()}}else{this.modal.css({visibility:"hidden"});this.modalContent.empty();this.modalContent.append(c);this.options.onOpenStart();this.modal.css({visibility:"visible"});this.centerElement(this.modal);this.isOpen=true;this.isLoading=false;this.body.addClass("modal-active");this.options.onOpenComplete();if(b){b()}if(d){this.activeCloseCallback=d}}};CP.utils.Modal.prototype.close=function(c){if(this.isOpen){var a=this;if(jQuery.browser.msie){var b=a.modalContent.find("object");b.each(function(f,d){b.replaceWith('<div id="'+b.attr("id")+'" />')})}this.options.onCloseStart();this.modal.fadeOut(this.options.transitionDuration,function(){a.modalContent.empty();a.loading.hide();a.overlay.hide();if(a.closeButton){a.closeButton.hide()}a.isLoading=false;a.isOpen=false;a.body.removeClass("modal-active");a.options.onCloseComplete();if(c){c()}if(a.activeCloseCallback){a.activeCloseCallback();a.activeCloseCallback=null}})}};function setCookie(c,f,b){var g="clubpenguin.com";var a=window.location.hostname;if(a.search(/cp.local/)>-1){g=a}expiry_str="";path_str="; path=/";domain_str="; domain="+g;if(b){var h=new Date();h.setDate(h.getDate()+b);expiry_str=";expires="+h.toGMTString()}document.cookie=c+"="+escape(f)+expiry_str+path_str+domain_str}function getCookie(a){var b=document.cookie.indexOf(a+"=");if(b==-1){return null}b+=a.length+1;var c=document.cookie.indexOf(";",b);if(c==-1){c=document.cookie.length}return unescape(document.cookie.substring(b,c))}if(!getCookie("cpvisitor")){setCookie("cpvisitorsession","true","");setCookie("cpvisitor","new",2400)}else{if(!getCookie("cpvisitorsession")){if((getCookie("cpvisitor"))=="new"){setCookie("cpvisitor","new",-1);setCookie("cpvisitor","return",2400)}}}var qsParm=new Array();function qs(){var d=window.location.search.substring(1);var c=d.split("&");for(var b=0;b<c.length;b++){var g=c[b].indexOf("=");if(g>0){var a=c[b].substring(0,g);var f=c[b].substring(g+1);qsParm[a]=f}}}qsParm.oast=null;qs();if(qsParm.oast!=null){if(getCookie("oast")){setCookie("oast","",-1);setCookie("oast",qsParm.oast,2400)}else{setCookie("oast",qsParm.oast,2400)}}browserid=getCookie("cpBROWSERID");if(browserid=="-1"||browserid=="null"||browserid==null){browserid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var b=Math.random()*16|0,a=d=="x"?b:(b&3|8);return a.toString(16)});try{setCookie("cpBROWSERID",browserid,365)}catch(e){}}if(typeof jsAPI==="undefined"){jsAPI={}}jsAPI.showHTMLElements=function(){$("#membershipOptionsPrimary, #membershipOptions_real, #membershipOptions_other, #membershipOptionsSecondary, #membershipOptions_ca").css({visibility:"visible"})};jsAPI.mboxBackground=function(){try{$("#content").css({background:"#417DC5"});var c=($.browser.msie&&parseInt($.browser.version)==7);if(c){if($("#membershipOptionsPrimary").length>0){$("#membershipOptionsPrimary").css({background:"url(/images/pricing_bg_ca_ie7.png) 0 0 no-repeat",height:"135px",margin:"8px 0 0 -14px"})}}else{if($("#membershipOptionsPrimary").length>0){$("#membershipOptionsPrimary").css({background:"url(/images/pricing_bg_ca_b.png) 0 0 no-repeat",height:"135px",margin:"8px 0 0 -14px"})}}if($("#membershipOptions_other").length>0){$("#membershipOptions_other").css({background:"url(/images/pricing_bg_ca_b.png) 0 0 no-repeat"})}if($("#membershipOptions_ca").length>0){$("#membershipOptions_ca").css({background:"url(/images/pricing_bg_ca_a.png) 0 0 no-repeat",height:"154px","margin-left":"-15px"})}if($("#membershipOptions_real").length>0){$("#membershipOptions_real").css({background:"url(/images/pricing_bg_ca_b.png) 0 0 no-repeat",height:"135px","margin-left":"-15px"})}if($("#content .padd").length>2){$("#membershipOptions_other").css({height:"135px",margin:"8px 0 20px 15px"})}else{if(!$($("#membershipOptions_other").parent()).hasClass("padd")){$("#membershipOptions_other").css({height:"135px",margin:"8px 0 20px 15px"})}else{$("#membershipOptions_other").css({height:"135px",margin:"8px 0 20px -15px"})}}if($("#content .padd").length>1){$($("#content .padd")[0]).css({background:"#fefde1","border-bottom":"3px solid #013A69"});var a=$($("#content .padd")[($("#content .padd").length-1)]);if(a.find("object").length==0){a.css({background:"#fff","border-top":"3px solid #013A69","margin-top":"25px"})}else{if(a.find("#membershipOptionsSecondary").length>0){$("#membershipOptionsSecondary").wrap('<div class="temporary-div" />');$("#content .padd").css({"padding-bottom":0})}}}}catch(b){}};(function(c){var b=10000;function a(g){var f=Drupal.settings.cp_tracking.protocolBase+"://global.go.com/stat/dolWebAnalytics.js";c.ajax({url:f,dataType:"script",cache:true,timeout:g}).done(function(h,j,i){d()}).fail(function(i,j,h){if(j=="timeout"&&g==b){a(1.5*b)}})}function d(){cto=new CTO();cto.account=Drupal.settings.cp_tracking.ctoAccount;cto.category=Drupal.settings.cp_tracking.ctoCategory;cto.site=Drupal.settings.cp_tracking.ctoSite;if(Drupal.settings.cp_tracking.section!="home"){cto.siteSection=Drupal.settings.cp_tracking.section}cto.pageName=Drupal.settings.cp_tracking.pageName+"_"+Drupal.settings.cp_tracking.langPath;cto.contentType=Drupal.settings.cp_tracking.qs;cto.property=Drupal.settings.cp_tracking.ctoProperty;cto.track()}c(function(){a(b)})})(jQuery);function launchMPGame(a){if(window.snowball){window.snowball.loadMP(a)}}function returnToClubPenguin(a){if(window.snowball){window.snowball.returnToClient(a)}}function nameResubmission(h,d,f){var g=location.hostname.replace("play","secured");var c=((g.indexOf("sandbox")>=0)?"http":"https");var a=window.snowball?window.snowball.getLangPath():"/";var b=c+"://"+g+a+"penguin/update-username/"+h+"/"+d+"/"+f;Disney.Play.showModal(b)}function showActivationBanner(a){if(window.snowball){window.snowball.handleDisplayBanner("activation",{hoursRemaining:a})}jQuery("#pre-activated-banner-btn").click(function(b){b.preventDefault();if(window.snowball){window.snowball.handleShowActivation()}})}function showMembershipBanner(a){var b=jQuery.ajax({url:"http://"+location.hostname+"/web-service/membership",type:"POST",data:{swid:a},success:function(c){if(c.membershipExpiring){if(c.showBanner){if(window.snowball){window.snowball.handleDisplayBanner("membership",{daysRemaining:c.daysRemaining})}}}}})}function showRules(c){var b=location.hostname.replace("play","www");var a="http://"+b;a=c!="en"?a+"/"+c:a;window.cp.showRules(a)}function goBack(){window.history.back()}if(typeof CP==="undefined"){CP={}}CP.Error=function(a){this.code=a.code;this.header=a.header;this.headerTag=a.headerTag;this.message=a.message;this.messageTag=a.messageTag;this.links=a.links;this.errorTextClass="errorText"};CP.Error.prototype.render=function(){var d=this.renderHeader();var c=this.renderMessage();var b=this.renderLinks();var a=jQuery("<div>").attr({id:this.code,"class":this.errorTextClass});return jQuery(a).append(jQuery(d).after(jQuery(c))).after(jQuery(b))};CP.Error.prototype.renderHeader=function(){return this.renderElement(this.headerTag,this.header)};CP.Error.prototype.renderMessage=function(){return this.renderElement(this.messageTag,this.message)};CP.Error.prototype.renderElement=function(a,b){return jQuery(a).html(b)};CP.Error.prototype.renderLinks=function(){var b=jQuery("<div>");for(var c=0;c<this.links.length;c++){if(this.links[c].type=="img"){var a=jQuery("<img>").attr({src:this.links[c].label});var d=jQuery("<a>").attr({id:this.links[c].id,href:this.links[c].href});jQuery(b).append(jQuery(d).append(a))}else{jQuery(b).append(jQuery("<a>").attr("id",this.links[c].id).text(this.links[c].label))}}return jQuery(b)};if(typeof CP==="undefined"){CP={}}(function(a){CP.Banner=function(d,c){this.options={};a.extend(true,this.options,c);var b=this;this.type=d;this.renderFunctions={activation:function(){b.renderActivation()},membership:function(){b.renderMembership()}};this.bannerId="banner"};CP.Banner.prototype.display=function(){if(this.beforeRender()){this.render();this.afterRender()}};CP.Banner.prototype.beforeRender=function(){this.cleanUp();return true};CP.Banner.prototype.render=function(){if(this.renderFunctions[this.type]!==undefined){this.renderFunctions[this.type]()}};CP.Banner.prototype.afterRender=function(){};CP.Banner.prototype.cleanUp=function(){a("#"+this.bannerId).empty();a("#"+this.bannerId).show()};CP.Banner.prototype.renderActivation=function(){var c=Drupal.settings.snowball_banner.preActivationLastDay;if(this.options.hoursRemaining>24){var b=Math.ceil(this.options.hoursRemaining/24);c=Drupal.settings.snowball_banner.preActivationDaysRemaining.replace("%daysRemaining%",b)}else{if(this.options.hoursRemaining>1){c=Drupal.settings.snowball_banner.preActivationHoursRemaining.replace("%hoursRemaining%",this.options.hoursRemaining)}}a("#"+this.bannerId).append(a("<span>").html(c));a("#"+this.bannerId).append(a("<a>").attr({id:"pre-activated-banner-btn",href:"javascript:void(0);"}).html(Drupal.settings.snowball_banner.preActivationAbout))};CP.Banner.prototype.renderMembership=function(){var b=Drupal.settings.snowball_banner.membershipLastDay;if(this.options.daysRemaining>1){b=Drupal.settings.snowball_banner.membershipDaysRemaining.replace("%daysRemaining%",this.options.daysRemaining)}a("#"+this.bannerId).append(a("<span>").html(b));a("#"+this.bannerId).append(a("<a>").attr({href:"http://web.archive.org/web/20160725223621/https://secured.clubpenguin.com/membership/",target:"_blank"}).html(Drupal.settings.snowball_banner.membershipAbout))}})(window.jQuery);document.domain="clubpenguin.com";var Disney=Disney||{};Disney.Play=Disney.Play||{};Disney.Membership=Disney.Play;(function(a){Disney.CP=function(){this.currentIndex=0};Disney.CP.prototype.showRules=function(d){var c="/club-penguin-rules";var b=d+c;Disney.Play.showModal(b)};Disney.Play.initModal=function(){Disney.Play.modal=new CP.utils.Modal({overlayClickClose:false,contentCloseDelegate:".modal-close",onOpenComplete:function(){},onCloseComplete:function(){},onCloseStart:function(){},onOpenStart:function(){}})};Disney.Play.showModal=function(b){var c="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(g){var f=Math.random()*16|0,d=g=="x"?f:(f&3|8);return d.toString(16)});html='<iframe id="modal-iframe" src="'+b+"?"+c+'" height="500" width="500" allowtransparency="true" marginheight="0" marginwidth="0" frameborder="0" style="overflow:hidden;" style="visibility:hidden;" onload="this.style.visibility = \'visible\';"=></iframe>';jQuery(".modal-close").css({display:"none",top:"12px",right:"39px"});jQuery("#modal-content").html(html).css({top:"-2000px",position:"relative"});jQuery("#modal-window").append(jQuery("#preload-gif").html());jQuery("#modal-window img:last").css({top:"47%",left:"47%",position:"fixed"});jQuery("iframe#modal-iframe").load(function(){jQuery("#modal-content").css({top:"0",position:"relative"});jQuery("#modal-window img:last").remove();jQuery(".modal-close").css({display:"block",top:"12px",right:"39px"})});Disney.Play.modal.showClose=false;Disney.Play.modal.open(null,null,Disney.Play.closeModalCallback)};Disney.Play.closeModalCallback=function(){if(Disney.Play.newName&&window.snowball){try{window.snowball.handleNameResubmit(Disney.Play.newName,Disney.Play.newToken,Disney.Play.newLoginData)}catch(b){}}};Disney.Play.get_browser=function(){var c=navigator.userAgent,b,d=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(d[1])){b=/\brv[ :]+(\d+)/g.exec(c)||[];return"IE "+(b[1]||"")}if(d[1]==="Chrome"){b=c.match(/\bOPR\/(\d+)/);if(b!=null){return"Opera "+b[1]}}d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"];if((b=c.match(/version\/(\d+)/i))!=null){d.splice(1,1,b[1])}return d[0]};Disney.Play.get_browser_version=function(){var c=navigator.userAgent,b,d=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(d[1])){b=/\brv[ :]+(\d+)/g.exec(c)||[];return"IE "+(b[1]||"")}if(d[1]==="Chrome"){b=c.match(/\bOPR\/(\d+)/);if(b!=null){return"Opera "+b[1]}}d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"];if((b=c.match(/version\/(\d+)/i))!=null){d.splice(1,1,b[1])}return d[1]};a(document).ready(function(b){window.cp=new Disney.CP();Disney.Play.newName=false;Disney.Play.newLoginData=false;Disney.Play.newToken=false;Disney.Play.initModal()})})(window.jQuery);if(typeof CP==="undefined"){CP={}}CP.FlashClient=function(a,b){this.options={};jQuery.extend(true,this.options,a);this.friendsClient=b;this.id="cp_flash";this.logoutClass="logout";this.domElement=null;this._cleanedUp=false};CP.FlashClient.prototype.getElement=function(){if(!this.domElement){this.domElement=jQuery("<div>").attr("id",this.id)}return this.domElement};CP.FlashClient.prototype.load=function(b){var a=this.beforeRender(b);if(!a.hasError){this.render();this.afterRender()}return a};CP.FlashClient.prototype.beforeRender=function(b){var a=new CP.Result();if(!b){a=CP.FlashClient.validateFlashVersion(this.options.minimumSwfVersion,this.options.recommendedSwfVersion)}if(!a.hasError){this.friendsClient.load()}this.loadSwfAddressJS();return a};CP.FlashClient.prototype.loadSwfAddressJS=function(){var a={type:"text/javascript",src:this.options.swfAddressUrl};var b=jQuery("<script>").attr(a);jQuery("head").append(b)};CP.FlashClient.prototype.render=function(){var f=this.options.loadSwf;var b=this.id;var c="100%";var d="100%";var h={play:this.options.baseUrl,client:this.options.clientDirectory,content:this.options.contentDirectory,games:this.options.gamesDirectory,connectionID:this.options.connectionID,a:this.options.affStyle,p:this.options.promotionString,nau:jQuery.trim(getCookie("nau")),nal:jQuery.trim(getCookie("nal")),nas:jQuery.trim(getCookie("nas")),nad:jQuery.trim(getCookie("nad")),lang:Drupal.settings.snowball.language,phrasechat:this.options.phraseChatUrl,isAS3WebServicesOn:true,cacheVersion:this.options.cacheVersion,clientVersion:this.options.clientVersion,configVersion:this.options.configVersion,contentVersion:this.options.contentVersion,minigameVersion:this.options.minigameVersion};var g={menu:"false",quality:"high",allowscriptaccess:"always",wmode:"transparent"};var a={id:this.id,name:this.id,"class":"disney_land_clubpenguin_player"};swfobject.switchOffAutoHideShow();swfobject.embedSWF(f,b,c,d,this.options.minimumSwfVersion,this.options.expressInstallSwfUrl,h,g,a);this.show()};CP.FlashClient.prototype.afterRender=function(){};CP.FlashClient.prototype.hide=function(){jQuery("#"+this.id).css("left","-9999px");jQuery("body").removeClass("flash")};CP.FlashClient.prototype.show=function(){jQuery("#"+this.id).css("left","0px");jQuery("body").addClass("flash");jQuery("."+this.logoutClass).css("display","inline-block")};CP.FlashClient.prototype.handleMPInstanceClose=function(b){try{jQuery("#"+this.id)[0].handleMPInstanceClose(b)}catch(a){}};CP.FlashClient.prototype.handleNameResubmit=function(a,b,c){jQuery("#"+this.id)[0].handleNameResubmit(a,b,c)};CP.FlashClient.prototype.handleShowActivation=function(){jQuery("#"+this.id)[0].handleShowPreactivation()};CP.FlashClient.prototype.handleLogOff=function(a){try{jQuery("#"+this.id)[0].handleLogOff(a);this._cleanedUp=true}catch(b){}};CP.FlashClient.prototype.handleUnload=function(){try{if(!this._cleanedUp){jQuery("#"+this.id)[0].handleWindowUnload()}else{}}catch(a){}};CP.FlashClient.validateFlashVersion=function(b,c){var a=new CP.Result();if(swfobject.hasFlashPlayerVersion("1")){if(swfobject.hasFlashPlayerVersion(c)){}else{if(swfobject.hasFlashPlayerVersion(b)){a.addError(Drupal.settings.snowball_errors.flashUpgradeRequired)}else{a.addError(Drupal.settings.snowball_errors.flashMinimumRequired)}}}else{if(window.snowball.browserType=="Chrome"){a.addError(Drupal.settings.snowball_errors.flashInstallRequiredChrome)}else{a.addError(Drupal.settings.snowball_errors.flashInstallRequired)}}return a};if(typeof CP==="undefined"){CP={}}CP.UpgradeFlashClient=function(a){this.options={};jQuery.extend(true,this.options,a);this.id="cp_flash_upgrade";this.domElement=null};CP.UpgradeFlashClient.prototype.getElement=function(){if(!this.domElement){this.domElement=jQuery("<div>").attr("id",this.id)}return this.domElement};CP.UpgradeFlashClient.prototype.load=function(){var a=this.beforeRender();if(!a.hasError){this.render();this.afterRender()}return a};CP.UpgradeFlashClient.prototype.beforeRender=function(){return new CP.Result()};CP.UpgradeFlashClient.prototype.render=function(){var f=Drupal.settings.misc_game_settings.expressInstallSwfUrl;var b=this.id;var c="100%";var d="80%";var a=Drupal.settings.flash_game_settings.minimumSwfVersion;var h={};var g={menu:"false",quality:"high",allowscriptaccess:"always",wmode:"transparent"};swfobject.embedSWF(f,b,c,d,a,false,h,g);this.show()};CP.UpgradeFlashClient.prototype.afterRender=function(){};CP.UpgradeFlashClient.prototype.hide=function(){jQuery("body").removeClass("flashUpgrade")};CP.UpgradeFlashClient.prototype.show=function(){jQuery("body").addClass("flashUpgrade");this.domElement.css("visibility","visible")};if(typeof CP==="undefined"){CP={}}CP.MPClient=function(a){this.options={};jQuery.extend(true,this.options,a);this.id="mp_client";this.bgColor="#22a4f3";this.domElement=null;this.gameDetails={};this.heightThreshold=720};CP.MPClient.prototype.getElement=function(){if(!this.domElement){this.domElement=jQuery("<div>").attr("id",this.id)}return this.domElement};CP.MPClient.prototype.setGameDetails=function(a){this.gameDetails=a};CP.MPClient.prototype.load=function(b){var a=this.beforeRender(b);if(!a.hasError){this.snfRequest(a)}return a};CP.MPClient.prototype.snfRequest=function(a){var b=this;this.gameDetails.worldName=this.options.productName+"_"+this.gameDetails.pid.substr(1,this.gameDetails.pid.length-2);jQuery.ajax({url:this.options.affLangDir+"/web-service/snfgenerator/session",type:"POST",async:false,data:this.gameDetails,success:function(c){b.onSnfSuccess(c,a)},error:function(c,f,d){b.onSnfError(c,f,d,a)}})};CP.MPClient.prototype.onSnfSuccess=function(b,a){if(!b.hasError){this.gameDetails.snfSession=b.data;this.render();this.afterRender()}else{this.setError(a)}};CP.MPClient.prototype.onSnfError=function(b,d,c,a){this.setError(a)};CP.MPClient.prototype.setError=function(a){a.addError(Drupal.settings.snowball_errors.cjSnowSnfGenerator)};CP.MPClient.prototype.beforeRender=function(b){var a=new CP.Result();if(!b){a=CP.MPClient.validateFlashVersion(this.options.minimumSwfVersion)}return a};CP.MPClient.prototype.render=function(){var d=this.getSize(this.gameDetails.gameHeight);var g=this.options.loadSwf;var b=this.id;var c="100%";var f="100%";var i={mpProduct:this.options.product,snfSession:this.gameDetails.snfSession,pid:this.gameDetails.pid,worldName:this.gameDetails.worldName,base_asset_url:this.options.baseAssetUrl,assetServer:this.options.assetServer,assetSeed:this.options.assetSeed,manifest:this.options.manifestUrl,devMode:"false",wns:this.options.wns,lang:this.options.lang,SWF_ERRORS:this.options.SWF_ERRORS,SWF_LOADER:this.options.SWF_LOADER,queryString:encodeURIComponent("battleMode="+this.gameDetails.data+"&base_asset_url="+this.options.baseAssetUrl),DEVICE_STRING:d,PLACE:"snow_lobby",isMuted:this.gameDetails.isMuted};var h={menu:"false",quality:"high",allowscriptaccess:"always",wmode:"direct",bgColor:this.bgColor};var a={id:this.id,name:this.id,};swfobject.embedSWF(g,b,c,f,this.options.minimumSwfVersion,false,i,h,a);this.show()};CP.MPClient.prototype.afterRender=function(){};CP.MPClient.prototype.hide=function(){jQuery("body").removeClass("mp"+this.getSize(this.gameDetails.gameHeight));this.destroy()};CP.MPClient.prototype.show=function(){jQuery("body").addClass("mp"+this.getSize(this.gameDetails.gameHeight))};CP.MPClient.prototype.getSize=function(a){var b="large";if(a!=undefined&&a<this.heightThreshold){b="small"}return b};CP.MPClient.prototype.destroy=function(){swfobject.removeSWF(this.id);jQuery("#"+this.id).remove()};CP.MPClient.validateFlashVersion=function(b){var a=new CP.Result();if(!swfobject.hasFlashPlayerVersion(b)){a.addError(Drupal.settings.snowball_errors.cjSnowFlashUpgradeRequired)}return a};if(typeof CP==="undefined"){CP={}}CP.FriendsClient=function(a){this.friendsUrl=a;this._initialized=false};CP.FriendsClient.prototype.load=function(){if(!this._initialized){if(this.beforeInitialize()){this.initialize()}}};CP.FriendsClient.prototype.beforeInitialize=function(a){if(this.friendsUrl==""){return false}return true};CP.FriendsClient.prototype.initialize=function(){var a={type:"text/javascript",charset:"utf-8",src:this.friendsUrl};var b=jQuery("<script>").attr(a);jQuery("head").append(b);this._initialized=true};if(typeof CP==="undefined"){CP={}}(function(a){CP.Result=function(){this.hasError=false;this.error=undefined};CP.Result.prototype.addError=function(b){this.hasError=true;this.error=b};CP.snowball=function(c){this.options={};a.extend(true,this.options,c);var b=this;this.forceLoad=false;this.renderFunctions={"/start":function(){window.location.href=b.url.attr("base")+b.url.attr("directory")},"/login":function(){b.flow="game";b.loadCP(b.forceLoad)},"/redeem":function(){b.flow="redeem";b.loadCP(false)},"/upgrade":function(){b.loadUpgradeFlash()},"/create":function(){b.renderCreate()}};this.affiliateHeaderId="affiliate-header";this.gameContainerId="D_F_GameSection";this.gameContainerElement=undefined;this.friendsClient=undefined;this.cpClient=undefined;this.upgradeFlashClient=undefined;this.mpClient=undefined;this._listenersInitialized=false;this.browserType=Disney.Play.get_browser()};CP.snowball.prototype.getLangPath=function(){return Drupal.settings.snowball.langPath};CP.snowball.prototype.load=function(b){this.preProcess(b);this.initHeader();this.initMain();this.initFooter();this.initListeners()};CP.snowball.prototype.preProcess=function(b){this.url=a.url();this.fragment=this.url.attr("fragment").replace(/\/*$/,"");if(!b&&this.fragment==""){this.fragment="/start";if(this.cpClient){this.cpClient.handleLogOff()}}this.friendsClient=new CP.FriendsClient(Drupal.settings.misc_game_settings.friendsUrl)};CP.snowball.prototype.initHeader=function(){this.initAffiliateHeader();this.initLanguageMenu()};CP.snowball.prototype.initAffiliateHeader=function(){var b=getCookie("p");if(b&&b!="1"){a("body").addClass("affiliate");a("#"+this.affiliateHeaderId).show()}};CP.snowball.prototype.initLanguageMenu=function(){var b=this;b.languageToggleHeight=-(a("#bottom-languages").height()+1);var c=b.url.attr("query");c=c!=""?"?"+c:"";a("#bottom-languages a").each(function(){var d=a(this).attr("href");var g=/\/#\/(\w+)/g;if(d.search(g)==-1){a(this).attr("href",d+c+window.location.hash)}else{var f=b.url.attr("fragment");a(this).attr("href",d.replace(g,"/#"+f))}});a("#language-select a.top-level").click(function(d){d.preventDefault();a(this).addClass("active");a("#bottom-languages").css("display","block")});a("#language-select").mouseleave(function(){a("a.top-level").removeClass("active");a("#bottom-languages").hide()})};CP.snowball.prototype.initMain=function(){if(this.beforeRenderMain()){this.renderMain();this.afterRenderMain()}};CP.snowball.prototype.beforeRenderMain=function(){return true};CP.snowball.prototype.renderMain=function(){try{if(this.renderFunctions[this.fragment]!==undefined){this.renderFunctions[this.fragment]()}}catch(b){this.displayInGameError(Drupal.settings.snowball_errors.general)}};CP.snowball.prototype.afterRenderMain=function(){a("main section").show()};CP.snowball.prototype.loadCP=function(c){this.prepareMainContainer();if(this.upgradeFlashClient){this.upgradeFlashClient.hide()}this.cpClient=this.getClient("flash");this.appendClient(this.cpClient);var b=this.cpClient.load(c);if(b.hasError){this.displayError(b.error);delete this.cpClient}};CP.snowball.prototype.getClient=function(c){if(!c){c="flash"}var b={};switch(c){case"flash":a.extend(true,b,Drupal.settings.flash_game_settings,Drupal.settings.misc_game_settings,Drupal.settings.snowball);return new CP.FlashClient(b,this.friendsClient);case"upgrade":a.extend(true,b,Drupal.settings.flash_game_settings,Drupal.settings.misc_game_settings,Drupal.settings.snowball);return new CP.UpgradeFlashClient(b);case"mp":a.extend(true,b,Drupal.settings.mp_game_settings,Drupal.settings.misc_game_settings);return new CP.MPClient(b)}};CP.snowball.prototype.appendClient=function(b){a(this.gameContainerElement).append(b.getElement())};CP.snowball.prototype.prepareMainContainer=function(){a("#billboards, #actions, #error").remove();if(!this.gameContainerElement){this.gameContainerElement=a("<section>").attr("id",this.gameContainerId);a("main#content").append(a(this.gameContainerElement))}else{this.gameContainerElement.empty()}};CP.snowball.prototype.loadMP=function(c){c.gameHeight=parseInt(this.gameContainerElement.height());if(this.cpClient){this.cpClient.hide()}if(!this.mpClient){this.mpClient=this.getClient("mp");this.mpClient.setGameDetails(c);this.appendClient(this.mpClient)}var b=this.mpClient.load(false);if(b.hasError){this.displayInGameError(b.error)}};CP.snowball.prototype.returnToClient=function(b){if(this.mpClient){this.mpClient.hide();delete this.mpClient}if(this.cpClient){this.cpClient.show(b);this.cpClient.handleMPInstanceClose(b)}};CP.snowball.prototype.handleNameResubmit=function(b,c,d){if(this.cpClient){this.cpClient.handleNameResubmit(b,c,d)}};CP.snowball.prototype.handleShowActivation=function(){if(this.cpClient){this.cpClient.handleShowActivation()}};CP.snowball.prototype.handleDisplayBanner=function(c,b){new CP.Banner(c,b).display();a("body").addClass("membershipBanner")};CP.snowball.prototype.loadUpgradeFlash=function(){this.prepareMainContainer();delete this.cpClient;this.upgradeFlashClient=this.getClient("upgrade");this.appendClient(this.upgradeFlashClient);var b=this.upgradeFlashClient.load();if(b.hasError){this.displayError(b.error);delete this.upgradeFlashClient}};CP.snowball.prototype.renderCreate=function(){window.location=Drupal.settings.misc_game_settings.createUrl+"/"+this.flow};CP.snowball.prototype.initFooter=function(){};CP.snowball.prototype.displayError=function(c){var b=a("<div>").attr("id","error").append(new CP.Error(c).render());a(this.gameContainerElement).append(b)};CP.snowball.prototype.displayInGameError=function(c){var f="ingame-error";var b=a("<div>").attr({id:f}).append(new CP.Error(c).render());a(this.gameContainerElement).append(b);var d=this;a("#"+f+" a").click(function(){d.returnToClient();a(b).remove()})};CP.snowball.prototype.initListeners=function(){if(!this._listenersInitialized){var b=this;a("a").click(function(){if(b.cpClient&&a(this).attr("href")!=="#"){b.cpClient.handleLogOff(a(this).attr("href"));return true}return true});a(window).unload(function(){if(b.cpClient){b.cpClient.handleUnload()}});a("#ignore-button").live("click",function(){b.forceLoad=true;a(window).trigger("hashchange")});this._listenersInitialized=true}}})(window.jQuery);window.jQuery(document).ready(function(a){window.snowball=new CP.snowball();window.snowball.load(true);a(window).bind("hashchange",function(b){window.snowball.load(false)})});
/*
     FILE ARCHIVED ON 22:36:21 Jul 25, 2016 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 19:25:03 Nov 01, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  LoadShardBlock: 41.263 (3)
  esindex: 0.01
  captures_list: 73.568
  CDXLines.iter: 15.482 (3)
  PetaboxLoader3.datanode: 55.062 (5)
  exclusion.robots: 0.377
  exclusion.robots.policy: 0.361
  RedisCDXSource: 12.813
  PetaboxLoader3.resolve: 64.997 (2)
  load_resource: 97.556
*/
